import { Callout } from 'nextra-theme-docs'

# Contributing

If you're interested in supporting Stump's development, and you know how to code, follow the steps outlined in the [developer guide](#developer-guide) for information about setting up your development environment.

## Developer Guide

Contributions are very **encouraged** and **welcome**! Be sure to review the [CONTRIBUTING.md](https://github.com/aaronleopold/stump/blob/main/CONTRIBUTING.md) before getting started with your contribution.

If you're completely new to rust and/or web development, I put together a small set of [resources](#developer-resources) to get you started with Stump.

**Ensure you are on the `develop` branch before continuing.**

<Callout emoji="🪟">
	If you are on a Windows machine, you will need [Visual
	C++](https://docs.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist?view=msvc-170)
	installed on your system.
</Callout>

<Callout emoji="🍎">
	If you are on a Mac with Apple Silicon, you will need to install
	[Rosetta](https://support.apple.com/en-us/>HT211861).
</Callout>

You need to install [pnpm](https://pnpm.io/installation), [rust](https://www.rust-lang.org/tools/install) and [node](https://nodejs.org/en/download/). Additionally, if you want to run any of the dev scripts on the rust side of things, you'll need to install [cargo-watch](https://crates.io/crates/cargo-watch). Afterwards, run the following:

```bash
pnpm run setup
```

This will install the project dependencies, build the frontend bundle (required for server to start), generate the prisma client, and create the sqlite database.

### Running Stump

I use [moonrepo](https://moonrepo.dev/) for Stump's repository management. You'll want to read a bit about how it works, but below are two useful examples executing moon tasks concurrently:

```bash
# webapp + server
moon run server:dev web:dev
# desktop app + server
moon run server:start desktop:desktop-dev
```

Notice the general format is `moon run <app>:<command>`. You can supply multiple `<app>:<command>` pairs to run multiple tasks concurrently.

## Notes and Tips

Stump has gotten quite large and complex, so I've put together a few notes and tips to help you get started.

### Where to start?

If you aren't sure what to work on, I recommend taking a look at some of the open [issues](https://github.com/aaronleopold/stump/issues) on GitHub. You can also reach out to me on [Discord](https://discord.gg/63Ybb7J3as), or an open GitHub issue, if you have any questions.

In general, some good places to start might be:

- Translation, so Stump is accessible to non-English speakers.
- Implementing a comprehensive test suite for both the Rust `core` and `server`.
- Designing and/or implementing UI elements.
- Docker build optimizations and caching strategies.
- CI pipelines / workflows.
- And lots more!

### Code Style, Formatting, and Linting

<Callout emoji="🚧">
	moonrepo will format `yaml` and `json` files in a way that deviates from the repo configurations
	outlined below. This is something that [currently cannot be
	changed](https://moonrepo.dev/docs/faq#how-to-stop-moon-formatting-json-and-yaml-files). Because
	of this, it is very likely the pre-commit hook will fail, so often times you will have to run
	`pnpm prettify` to fix the format issues caused by moonrepo.
</Callout>

Stump is developed using primarily [Rust](https://www.rust-lang.org/) and [TypeScript](https://www.typescriptlang.org/).

For Rust, I use [rustfmt](https://github.com/rust-lang/rustfmt) for formatting, and [clippy](https://github.com/rust-lang/clippy) for linting. For TypeScript, I use [Prettier](https://prettier.io/) for formatting, and [ESLint](https://eslint.org/) for linting. While I definitely recommend using these tools as you develop, there is a pre-commit hook that will lint and format your code before committing.

I also want to point out that this repository uses 4 tab spaces for indentation. This is primarily for accessibility, as well as to be consistent with the Rust codebase. If you'd like, you can configure your editor to render whatever indentation you prefer, even though the raw code will be as described above. I personally maintain the 4 tab space rendering on the Rust side and shorten it to only render 2 on the frontend side.

### Component Library

Stump has a custom component library used throughout the `interface` package (the web UI and desktop app). This library can be found at `packages/components`, and was developed with Storybook in mind. For getting started building out designs and components in Stump, I highly recommend going through the stories available in the Storybook UI:

```bash
moon run components:storybook
```

This will give you a good idea of what components are available and how they can be used.

### Developer Resources

Below is a list of resources that I've found helpful in developing Stump. I'll try to keep this list up to date as I find new resources.

- [Rust Book](https://doc.rust-lang.org/book/)
- [Axum documentation](https://docs.rs/axum/latest/axum/)
- [Prisma Client Rust Documentation](https://prisma.brendonovich.dev/introduction)
- [OPDS specification](https://specs.opds.io/)
- [OPDS Page Streaming](https://vaemendis.net/opds-pse/#:~:text=The%20OPDS%20Page%20Streaming%20Extension,having%20to%20download%20it%20completely.)
- [Getting started with React](https://reactjs.org/docs/getting-started.html)
- [Tailwind CSS](https://tailwindcss.com/)

## Financial Contributions

If you'd like to support the project financially, you can do so using any of the following platforms:

- [Kofi](https://ko-fi.com/aaronleop)
- [GitHub Sponsors](https://github.com/sponsors/aaronleopold)
- [Open Collective](https://opencollective.com/stump)
