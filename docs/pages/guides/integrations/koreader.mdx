import { Callout, Steps } from 'nextra/components'

# KoReader Sync

<Callout emoji="🔐">
	This functionality is gated behind the `feature:koreader_sync` and `feature:api_keys` user
	permissions. To learn more about permissions, see the
	[permissions](/guides/access-control/permissions) guide.
</Callout>

KoReader is an open-source e-reader application that supports a variety of devices. Stump has a built-in implementation of the [sync API](https://github.com/koreader/koreader-sync-server) that enables KoReader to sync read progress with Stump.

## Setup

To set up KoReader sync with Stump, you need to:

<Steps>

### Install [KoReader](https://koreader.rocks/) on your device

### Enable the KoReader routes on your Stump instance

The KoReader router is disabled by default. To enable it, you need to set the `ENABLE_KOREADER_SYNC` environment variable to `true`, or directly set `enable_koreader_sync=true` in the `Stump.toml` configuration file.

See the [configuration guide](/guides/configuration/server-options) for more information.

### Generate an API key

<Callout emoji="🔐">This step requires the `feature:api_keys` user permissions.</Callout>

The API key should have at least the `feature:koreader_sync` permission:

1. Navigate to the app settings (`/settings/app`)
2. Click the `API keys` tab (`/settings/app/api-keys`)
3. Click the `Create API key` button
4. Create your key and save the full value after creation

### Configure a sync server in KoReader

1. Open KoReader on your device
2. Navigate to `Progress sync` > `Custom sync server`
3. Enter the following URL structure:

   ```bash
   http(s)://your-server(:port)(/baseUrl)/koreader/:api_key
   ```

</Steps>

<Callout emoji="🚀">
	Have you set up KoReader sync with Stump? I'd love to hear about your experience! This is a very
	new integration, so if you have any feedback or run into any issues, please let me know by opening
	an [issue](https://github.com/stumpapp/stump/issues)
</Callout>
